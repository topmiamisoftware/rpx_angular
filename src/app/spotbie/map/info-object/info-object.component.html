<div class="spotbie-overlay-window" [ngStyle]="getOverlayWindowStyling()">

    <div class='spotbie-album-media-image-wrapper' 
         *ngIf="info_object !== null && info_object !== undefined">
        
        <div class='sb-closeButton' (click)="closeWindowX()" [ngStyle]="getCloseButtonStyling()">
            <i class="fa fa-times"></i>
        </div>

        <div class='spotbie-info-object-title'>
                        
            <h6 class="spotbie-text-gradient sb-titleGreen text-uppercase" *ngIf="info_object.is_community_member">SPOTBIE COMMUNITY MEMBER</h6>

            <img class='sb-miniLogoIcon' src="assets/images/home_imgs/spotbie-green-icon.svg" *ngIf="info_object.is_community_member" />

            <h1 class="mb-3" [ngClass]="getTitleStyling()">{{ info_object.name }}</h1>
            
            <span class='spotbie-search-result-price' *ngIf="info_object.price_on == '1'">({{ info_object.price }})</span>

        </div>

        <div class='spotbie-info-object-image' [ngStyle]="{ 'background' : 'url(' + infoObjectImageUrl + ')'}"></div>
        
        <div class='spotbie-communityMemberDescription spotbie-text-gradient mb-4' *ngIf="info_object.is_community_member">
            {{ info_object.description }}
        </div>

        <div *ngIf="info_object !== null && info_object.hours !== undefined">

            <div class='spotbie-info-object-open' *ngIf="!info_object.isOpenNow">
                <span [ngClass]="getFontClasses()">CLOSED </span><span class='fa fa-circle spotbie-is-closed'></span>
            </div>
            
            <div class='spotbie-info-object-open' *ngIf="info_object.isOpenNow">
                <span [ngClass]="getFontClasses()">OPEN </span><span class='fa fa-circle spotbie-is-open'></span>
            </div>

        </div>

        <div class='spotbie-info-object-image-list' 
                *ngIf="info_object.type_of_info_object != 'ticketmaster_event' &&
                        info_object.type_of_info_object != 'spotbie_community'">
    
            <div class='spotbie-info-object-image-thumb'
                *ngFor="let thumbnail of info_object.photos"
                [ngStyle]="{ 'background' : 'url(' + thumbnail + ')'}"></div>
    
        </div>
        
        <div class='spotbie-info-object-image-list' 
                *ngIf="info_object.type_of_info_object == 'spotbie_community'">
    
            <div class='spotbie-info-object-image-thumb'
                [ngStyle]="{ 'background' : 'url(' + info_object.photo + ')'}"></div>
    
        </div>

        <div class='spotbie-info-object-image-list' *ngIf="info_object.type_of_info_object == 'ticketmaster_event'">
    
            <div class='spotbie-info-object-image-thumb'
                 [ngStyle]="{ 'background' : 'url(' + info_object.image_url + ')'}"></div>
    
        </div>

        <div class='spotbie-button spotbie-add-to-favorites' 
            (click)="addFavorite()"
            *ngIf="info_object.type_of_info_object != 'ticketmaster_event' && 
                    showFavorites && 
                    info_object.is_community_member">

            <span class="text-uppercase">ADD</span>            

            <i class="fa fa-plus"></i>

        </div>

        <div class='spotbie-button spotbie-add-to-favorites' 
                (click)="removeFavorite()" 
                *ngIf="info_object.type_of_info_object != 'ticketmaster_event' && !showFavorites">

            <span class="text-uppercase">REMOVE</span>            

            <i class="fa fa-minus"></i>

        </div>

        <div class='spotbie-search-result-phone' *ngIf="info_object.phone != ''">
            
            <a href="tel:{{info_object.phone}}" class='spotbie-friendly-ph' [ngClass]="getFontClasses()">
                {{ info_object.display_phone }}
            </a>

        </div>

        <div class='mt-4 mb-4' *ngIf="info_object.is_community_member">

            <span class='spotbie-text-gradient' style='font-size: .8rem;'>DOLLAR VALUE RATE</span><br/>
            <span class='sb-text-light-green-gradient mt-4 mb-4' style='font-size: 1.8rem;'>{{ info_object.rewardRate | currency : 'USD' }}</span><br/>
            <span class='spotbie-text-gradient' style='font-size: .8rem;'> PER DOLLAR SPENT</span>

        </div>

        <div class='spotbie-info-object-rating' [ngClass]="getFontClasses()" *ngIf="info_object.type_of_info_object == 'yelp_business'" (click)="visitInfoObjectPage()">

            <table class='spotbie-yelp-rating-table'>
                <tr>
                    <td>
                        <div class='spotbie-search-result-rating-img' [ngStyle]="{ 'background' : 'url(' + info_object.rating_image + ')' }"></div>
                    </td>
                    <td>
                        <div class='spotbie-search-result-yelp-logo' [ngStyle]="{ 'background' : 'url(assets/images/yelp/yelp_logo.png)' }"></div>
                    </td>
                </tr>
            </table>

        </div>
        
        <div class='spotbie-review-count mt-2' [ngClass]="getFontClasses()" *ngIf="info_object.type_of_info_object == 'yelp_business'" (click)="visitInfoObjectPage()">
            Based on {{ info_object.review_count | number:'1.0':'en-US' }} Reviews
        </div>
        
        <div class='spotbie-info-object-address' [ngClass]="getFontClasses()" *ngIf="info_object.type_of_info_object == 'ticketmaster_event'">

            <div class='spotbie-venue-name'>{{ info_object._embedded.venues[0].name }}</div>
            
            <br/>
            
            {{ info_object._embedded.venues[0].address.line1 }} {{ info_object._embedded.venues[0].city.name }}, {{ info_object._embedded.venues[0].state.stateCode }} {{ info_object._embedded.venues[0].postalCode }}    
        
            <div class='spotbie-time-event mb-2' *ngIf="info_object.dates.start.localDate">
                {{ info_object.dates.start.spotbieDate }}
            </div>

            <div class='spotbie-price-ranges mb-2' *ngIf="info_object.priceRanges !== undefined">
                Price Ranges ${{ info_object.priceRanges[0].min }} to ${{ info_object.priceRanges[0].max }}
            </div>

            <div class='spotbie-event-code mb-2' *ngIf="info_object.dates.status.code">
                Status: {{ info_object.dates.status.code }}
            </div>

        </div>
        
        <div class='' *ngIf="rewardMenuUp"> 
            <app-reward-menu [qrCodeLink]="info_object.qr_code_link" 
                              [fullScreenWindow]="false">
            </app-reward-menu>
        </div>

        <div class="spotbie-info-object-buttons">

            <div class='spotbie-distance mb-2' [ngClass]="getFontClasses()" *ngIf="info_object.distance !== undefined" (click)="openWithGoogleMaps()">
                {{ info_object.distance }} miles from you.
            </div>

            <i  class="fa fa-map-marker-alt" [ngClass]="getFontClasses()" aria-hidden="true" (click)="openWithGoogleMaps()"></i>

            <i  class="fa fa-globe" 
                *ngIf="!info_object.is_community_member"
                [ngClass]="getFontClasses()" 
                aria-hidden="true" 
                (click)="visitInfoObjectPage()"></i>

            <div class='spotbie-info-object-address' [ngClass]="getFontClasses()" *ngIf="info_object.type_of_info_object == 'yelp_business'" (click)="openWithGoogleMaps()">
                {{ info_object.location.display_address[0] }} 
                <br/>
                {{ info_object.location.display_address[1] }}            
            </div>

        </div>
    
        <div class='spotbie-info-object-transactions'> {{ info_object.friendly_transactions }} </div>

        <div class='spotbie-button spotbie-add-to-favorites' (click)="goToTicket()" *ngIf="info_object.type_of_info_object == 'ticketmaster_event'">
            Buy Tickets
        </div>

        <div class='spotbie-share-buttons-wrappper' *ngIf="info_object !== undefined">
    
            <share-buttons
                    show="4"
                    [theme]="getIconTheme()"
                    [url]="infoObjectLink"
                    [title]="info_object.name"
                    [description]="infoObjectDescription"
                    [autoSetMeta]="false">     
            </share-buttons>
    
        </div>

        <div class='spotbie-copy-link-button' [ngClass]="getFontClasses()" (click)="linkCopy(infoObjectShareLink)">tap to copy link</div>
    
        <div class='spotbie-share-post-link' (click)="linkCopy(infoObjectShareLink)">
    
            <input class='sb-input' type='text' [ngClass]="getInputClass()"  [(value)]="infoObjectLink" readonly #infoObjectShareLink />
    
        </div>

    </div>

    <div class='spotbie-exif-optional'></div>
    <div class='spotbie-ai-items-in-image'></div>

    <div class='spotbie-toast-message text-uppercase animated fadeIn' *ngIf="successful_url_copy">Link copied</div>

</div>

<app-loading-screen *ngIf="loading"></app-loading-screen>