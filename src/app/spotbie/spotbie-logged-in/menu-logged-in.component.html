<table class="spotbie-el-100
              spotbie-menu
              spotbie-menu-fixed"
       id="spotbie-topMenu"
       #spotbieMainMenu>
  <tr>
    <td class="sb-menu-nav" (click)="slideMenu()" *ngIf="!isDesktop">
      <i class="fa fa-bars" *ngIf="!menuActive"></i>
      <i class="fa fa-times" *ngIf="menuActive"></i>
    </td>

    <td [ngStyle]="getPointsWrapperStyle()">
      <ng-container *ngIf="this.userType === eAllowedAccountTypes.Personal else businessAccountToolbar">
        <img class="spotbie-header-mini-logo" src="assets/images/spotbie_logo_header.svg" *ngIf="isDesktop" (click)="home()"/>

        <span class='sb-loyalty-points' (click)="toggleLoyaltyPoints()" >{{ (userLoyaltyPoints$ | async) | number:'1.0':'en-US' }}</span>

        <img class='sb-loyalty-points' *ngIf="!isMobile && !isTablet" (click)="toggleRedeemables()"  src="assets/images/spotbie-loyalty-points.svg" />

        <div class="sb-businessMenu" *ngIf="!isDesktop">
          <img class='sb-loyalty-points' (click)="toggleRedeemables()" src="assets/images/spotbie-loyalty-points.svg" />
        </div>

        <img class='sb-qr' (click)="toggleQRScanner()"  src="assets/images/spotbie-qr.svg" />
      </ng-container>

      <ng-template #businessAccountToolbar>
        <img class="spotbie-header-mini-logo" src="assets/images/spotbie_logo_header.svg" (click)="home()" />
      </ng-template>

      <span class='sb-userName' (click)="openWindow(settingsWindow)" *ngIf="userName !== null && isDesktop">{{ userName }}</span>
    </td>

    <td *ngIf="isDesktop" class="sb-desktopNavBar" style="text-align: right; cursor: default;">
      <ng-container *ngIf="this.userType === eAllowedAccountTypes.Personal">
        <span (click)="spawnCategories(1)">
          PLACES TO EAT
        </span>

        <span (click)="spawnCategories(2)">
          RETAIL
        </span>

        <span (click)="spawnCategories(3)">
          EVENTS
        </span>
      </ng-container>

      <div class="sb-businessMenu" *ngIf="this.userType === eAllowedAccountTypes.Events">
        <img class='sb-loyalty-points' (click)="openEvents()" src="assets/images/spotbie-loyalty-points.svg" />
      </div>

      <span (click)="logOut()">
        LOG OUT
      </span>

      <ng-container *ngIf="(user$ | async)?.business.is_food_truck && this.userType === eAllowedAccountTypes.PlaceToEat">
        <span (click)="updateFoodTruck()" style="cursor: pointer">
          <fa-icon class='faFoodTruck' [icon]="faFoodTruck"></fa-icon>
        </span>
      </ng-container>
    </td>
  </tr>
</table>

<div class="spotbie-slider-menu-background" *ngIf="menuActive">
  <table class="spotbie-slider-menu
                animated slideInLeft" #spotbieMainMenu>
    <tr>
      <td>
        <div (click)="home()" *ngIf="this.userType !== eAllowedAccountTypes.Personal">
          HOME
        </div>

        <div (click)="spawnCategories(1)">
          PLACES TO EAT <i class="fa fa-angle-right"></i>
        </div>

        <div (click)="spawnCategories(2)">
          RETAIL <i class="fa fa-angle-right"></i>
        </div>

        <div (click)="spawnCategories(3)">
          EVENTS <i class="fa fa-angle-right"></i>
        </div>

        <!--<div (click)="myFavorites()">
          MY FAVORITES <i class="fas fa-angle-right"></i>
        </div>-->

        <div (click)="openWindow(settingsWindow)">
          SETTINGS
        </div>

        <div (click)="logOut()">
          LOG OUT
        </div>
      </td>
    </tr>
  </table>
</div>

<app-map [business]="business" *ngIf="(mapApp$ | async)" #spotbieMap (openBusinessSettingsEvt)="openBusinessSettings()"></app-map>

<app-settings *ngIf="settingsWindow.open" #spotbieSettings (closeWindowEvt)="closeWindow(settingsWindow)"></app-settings>
